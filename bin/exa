#!/bin/zsh

# Function to install exa for macOS using Homebrew
install_exa_macos() {
    if ! command -v brew &>/dev/null; then
        echo "Homebrew not found. Installing Homebrew first."
        /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    fi
    echo "Installing exa using Homebrew..."
    brew install exa
}

# Function to install exa for Linux distributions using apt-get (Debian/Ubuntu) or other suitable package managers
install_exa_linux() {
    if command -v apt-get &>/dev/null; then
        echo "Using apt-get to install exa..."
        sudo apt-get update && sudo apt-get install -y exa
    elif command -v yum &>/dev/null; then
        echo "Using yum to install exa (make sure you have the EPEL repository enabled)..."
        sudo yum install -y epel-release && sudo yum install -y exa
    elif command -v pacman &>/dev/null; then
        echo "Using pacman to install exa..."
        sudo pacman -Syu exa
    elif command -v zypper &>/dev/null; then
        echo "Using zypper to install exa..."
        sudo zypper refresh && sudo zypper install -y exa
    else
        echo "Package manager not recognized. You might need to install exa manually."
    fi
}

# Detect the operating system and install exa accordingly
OS="$(uname -s)"
case "$OS" in
    Linux*)     install_exa_linux;;
    Darwin*)    install_exa_macos;;
    *)          echo "Operating system not supported for automatic exa installation.";;
esac

# Success message
echo "\033[32m✨ exa has been installed successfully. ✨\033[0m"
